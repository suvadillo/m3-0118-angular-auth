webpackJsonp([1],{0:function(n,t,e){n.exports=e("x35b")},1:function(n,t){},"4UQF":function(n,t){n.exports='<div class="row">\n  <div class="col-md-6 center">\n    <div class="row games-board">\n      <h2>Public Games</h2>\n      <div *ngFor=\'let game of this.chat.allGames\' class="game-item">\n        <div class="cover-img">\n          <h3 class="item-game">{{ game.name }}</h3>\n          <p>Created by\n            <b>{{ game.creator.username }}</b>\n          </p>\n          <p>Game Status: {{ game.status }}</p>\n          <div *ngIf=\'game.status === "ready"\'>\n            <button (click)=\'joinGame(game._id)\' class="btn btn-lg btn-warning btn-lng">Join this Game</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-md-6 center">\n    <div class="row game-form">\n      <div *ngIf=\'user.username === admin\'>\n        <h2>CREATE A NEW GAME</h2>\n        <label for="">Name for the New Game</label>\n        <input class="form-control" type="text" [(ngModel)]="nameGame" />\n        <br>\n\n        <label for="">Number of questions per category</label>\n        <input class="form-control" type="number" min="1" max="5" [(ngModel)]="numberQuestionsCat" />\n        <br>\n        <button (click)="getNewGame(nameGame, numberQuestionsCat)" class="btn btn-lg btn-success btn-lng">Create New Game</button>\n      </div>\n    </div>\n  </div>\n</div>'},"5xMp":function(n,t){n.exports='<div class="site-wrapper">\n    <nav class="navbar navbar-black">\n      <div class="container-fluid">\n        <div class="navbar-header">\n          <a class="navbar-brand" href="#">Trivial Coding Game</a>\n        </div>\n        <ul *ngIf="!session.getUser()" class="nav navbar-nav navbar-right">\n          <button type="button" class="btn btn-link btn-lg glyphicon glyphicon-user" data-toggle="modal" data-target="#myModal1">SignUp</button>\n          <button type="button" class="btn btn-link btn-lg glyphicon glyphicon-log-in" data-toggle="modal" data-target="#myModal2">LogIn</button>\n        </ul>\n        <ul *ngIf="session.getUser()" class="nav navbar-nav navbar-right">\n          <button type="button" (click)="logout()" class="btn btn-link btn-lg glyphicon glyphicon-log-out">LogOut</button>\n        </ul>\n      </div>\n    </nav>\n  \n    <div class="container-form">    \n  \n        <div class="modal fade" id="myModal1" role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                <h4 class="modal-title">SignUp Form</h4>\n              </div>\n              <div class="modal-body">\n                  <div class="input-group">\n                  <span class="input-group-addon">\n                      <i class="glyphicon glyphicon-user"></i>\n                    </span>\n                  <input id="username1" type="text" class="form-control" [(ngModel)]="username" name="username" placeholder="Username">\n                  </div>\n                  <div class="input-group">\n                  <span class="input-group-addon">\n                      <i class="glyphicon glyphicon-lock"></i>\n                    </span>\n                  <input id="password1" type="password" class="form-control" [(ngModel)]="password" name="password" placeholder="Password">\n                </div>\n              </div>\n              <div>\n                  <p *ngIf="error" class="error"> {{ error }} </p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" (click)="signup()" data-dismiss="modal">SignUp</button>\n              </div>\n            </div>          \n          </div>\n        </div>      \n      </div>\n  \n      <div class="container-form">    \n  \n          <div class="modal fade" id="myModal2" role="dialog">\n            <div class="modal-dialog">\n              <div class="modal-content">\n                <div class="modal-header">\n                  <button type="button" class="close" data-dismiss="modal">&times;</button>\n                  <h4 class="modal-title">Login Form</h4>\n                </div>\n                <div class="modal-body">\n                    <div class="input-group">\n                    <span class="input-group-addon">\n                        <i class="glyphicon glyphicon-user"></i>\n                      </span>\n                    <input id="username" type="text" class="form-control" [(ngModel)]="username" name="username" placeholder="Username">\n                    </div>\n                    <div class="input-group">\n                    <span class="input-group-addon">\n                        <i class="glyphicon glyphicon-lock"></i>\n                      </span>\n                    <input id="password" type="password" class="form-control" [(ngModel)]="password" name="password" placeholder="Password">\n                  </div>\n                </div>\n                <div>\n                    <p *ngIf="error" class="error"> {{ error }} </p>\n                </div>\n                <div class="modal-footer">\n                  <button type="button" class="btn btn-default" (click)="login()" data-dismiss="modal">Login</button>\n                </div>\n              </div>          \n            </div>\n          </div>      \n        </div>\n\n  <router-outlet></router-outlet>\n\n</div>\n'},"8q1w":function(n,t){n.exports='<p>\n  game works!\n</p>\n<button (click)="startGame()">Start Game</button>\n'},"9rA2":function(n,t){n.exports=".chat{\n  padding: 20px;\n  width: 500px;\n  margin: 0 auto;\n}\n.conversations{\n  border: 1px solid orange;\n  padding: 20px;\n  background-color: beige;\n  max-height: 550px;\n  height: 300px;\n  overflow-y: scroll;\n}\n.sender{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\ninput{\n  font-size: 20px;\n  width: 80%;\n}\nbutton{\n  width: 20%;\n}\nh4.chat {\n  font-size: 28px;\n  font-weight: bold;\n  color: white;\n}\n.mensaje{\n  color: black;\n}\n.me{\n  text-align: right;\n}\n.other{\n  text-align: left;\n}\n.me .text{\n  background: lightgreen;\n}\n.other .text{\n  background: lightgray;\n}\n.text{\n  padding: 8px 20px;\n  border-radius: 10px;\n  display: inline-block;\n}\n.unselected{\n  background-color: buttonface;\n}\n.selected{\n  background-color: rgb(192, 189, 189);\n  color: dimgrey;\n}\n.no-correct-answer {\n  margin: 0 auto;\n  width: 80%;\n  min-height: 10px;\n  background-color: beige;\n}\n.correct-answer {\n  margin: 0 auto;\n  width: 80%;\n  min-height: 10px;\n  background-color: #5cb85c;\n}\n.go-home {\n  width: 40%;\n}\n.img-category {\n  margin-top: 180px;\n  width: 80%;\n}\nbutton.start-game {\n  width: 25%;\n}\nhtml,\nbody {\n  height: 100%;\n  background-color: #fff;\n}\nbody {\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 3px rgba(0,0,0,.5);\n}\n.site-wrapper {\n  background-image: url('trivial-world.abae401dab04b90385bb.jpg');\n  background-size: cover;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #333;\n  overflow: hidden;\n}\n.game-board {\n  color: white;\n}\n.game-board h2 {\n  font-size: 30px;\n}\n.game-board h2 span {\n  text-transform: uppercase;\n}\n.center {\n  text-align: center;\n}\n.col-md-6 {\n  padding-top: 50px;\n}\n.game-card {\n  margin: 0 auto;\n  background-color: #345c7d;\n  border: 2px white;\n  padding: 20px;\n}\n.game-started {\n  margin: 0 auto;\n  background-color: orange;\n  height: 440px;\n}\n.game-over {\n  margin: 0 auto;\n  background-color: orange;\n  height: 440px;\n  padding: 20px;\n}\n.ranking-item {\n  width: 90%;\n  margin: 0 auto;\n  font-size: 16px;\n  text-align: center;\n}\n.ranking-item td span{\n  font-size: 24px;\n  font-weight: bold;\n  color: orangered;\n}\n.ranking-item td, .ranking-item th{\n  text-align: center;\n}\n.ranking-item td:first-child, .ranking-item th:first-child{\n  width: 20%;\n}\n.left-game {\n  margin: 0 auto;\n}\n.question {\n  background-color: beige;\n  height: 400px;\n}\n.game-ranking {\n  background-color: beige;\n  padding: 5px;\n  min-height: 400px;\n  overflow-y: scroll;\n}\n.game-players {\n  background-color: beige;\n  padding: 5px;\n  min-height: 400px;\n  overflow-y: scroll;\n  color: #345c7d;\n}\n.players ul li {\n  list-style: none;\n}\n.question h2 {\n  padding-top: 20px;\n  padding-left: 10px;\n  padding-right: 10px;\n  font-size: 24px;\n}\n.category {\n  text-align: center;\n  color: #345c7d;\n  padding-top: 20px;\n  height: 400px;\n}\n.category span {\n  font-size: 24px;\n  font-family: 'Times New Roman', Times, serif;\n  font-weight: bold;\n}\n.answers button {\n  display: block;\n  width: 80%;\n  height: 50px;\n  margin: 0 auto;\n  margin-top: 20px;\n}\n.game-ranking h3 {\n  font-family: 'Times New Roman', Times, serif;\n  font-weight: bold;\n  font-size: 24px;\n  color: #345c7d;\n}"},E20h:function(n,t){n.exports="html,\nbody {\n  height: 100%;\n  background-color: #fff;\n}\nbody {\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 3px rgba(0,0,0,.5);\n}\n.error{\n    background-color:red;\n    color: white;\n    padding: 10px;\n    border: 1px solid black;\n    border-radius: 5px;\n}\n.input-group {\n    margin-bottom: 20px;\n}\n.site-wrapper {\n    background-image: url('trivial-world.abae401dab04b90385bb.jpg');\n    background-size: cover;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    min-height: 100vh;\n    background-color: #333;\n    overflow: hidden;\n}\n.navbar-black {\n    background-color: #222;\n    border-color: #080808;\n    color: #fff;\n}\n.navbar-black button{\n    color: #fff;\n}\n.btn-link:focus, .btn-link:hover{\n    text-decoration: none;\n}\n.glyphicon:before {\n    margin-right: 10px;\n}\n.modal-content{\n    background-color: #f0ad4e;\n    opacity:0.9;\n}\n.modal-title {\n    color: white;\n}\n.modal-footer {\n    border-top: none;\n}\n.modal-dialog {\n    margin: 60px auto;\n}\n.cover-container {\n    background-color: ghostwhite;\n    padding: 10px 50px 50px 50px;\n    opacity: 0.8;\n    margin-top: 100px;\n    border-radius: 10px;\n}\n.center {\n    text-align: center;\n}\nimg.facebook {\n    margin-right: 20px;\n}\na,\na:focus,\na:hover {\n  color: #fff;\n  text-decoration: none;\n}\n.site-wrapper-inner {\n  display: table-cell;\n  vertical-align: top;\n}\n.inner {\n  padding: 30px;\n}\n/*\n * Cover\n */\n.cover {\n  padding: 0 20px;\n}\n.cover .btn-lg {\n  padding: 10px 20px;\n  font-weight: bold;\n}\n/*\n * Affix and center\n */\n@media (min-width: 768px) {\n  /* Pull out the header and footer */\n  .masthead {\n    position: fixed;\n    top: 0;\n  }\n  /* Start the vertical centering */\n  .site-wrapper-inner {\n    vertical-align: middle;\n  }\n\n}\n"},JS6j:function(n,t){n.exports=""},Jnfr:function(n,t){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id="Jnfr"},okgc:function(n,t){n.exports="html,\nbody {\n  height: 100%;\n  background-color: #fff;\n}\nbody {\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 3px rgba(0,0,0,.5);\n}\n.error{\n    background-color:red;\n    color: white;\n    padding: 10px;\n    border: 1px solid black;\n    border-radius: 5px;\n}\n.input-group {\n    margin-bottom: 20px;\n}\n.site-wrapper {\n    background-image: url('trivial-world.abae401dab04b90385bb.jpg');\n    background-size: cover;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    min-height: 100vh;\n    background-color: #333;\n    overflow: hidden;\n}\n.navbar-black {\n    background-color: rebeccapurple;\n    border-color: mediumpurple;\n    color: #fff;\n}\n.navbar-black button{\n    color: #fff;\n}\n.btn-link:focus, .btn-link:hover{\n    text-decoration: none;\n}\n.glyphicon:before {\n    margin-right: 10px;\n}\n.modal-content{\n    background-color: #f0ad4e;\n    opacity:0.9;\n}\n.modal-title {\n    color: white;\n}\n.modal-footer {\n    border-top: none;\n}\n.modal-dialog {\n    margin: 60px auto;\n}\n.cover-container {\n    background-color: ghostwhite;\n    padding: 10px 50px 50px 50px;\n    opacity: 0.8;\n    margin-top: 100px;\n    border-radius: 10px;\n}\n.center {\n    text-align: center;\n}\nimg.facebook {\n    margin-right: 20px;\n}\na,\na:focus,\na:hover {\n  color: #fff;\n  text-decoration: none;\n}\n.site-wrapper-inner {\n  display: table-cell;\n  vertical-align: top;\n}\n.inner {\n  padding: 30px;\n}\n/*\n * Cover\n */\n.cover {\n  padding: 0 20px;\n}\n.cover .btn-lg {\n  padding: 10px 20px;\n  font-weight: bold;\n}\n/*\n * Affix and center\n */\n@media (min-width: 768px) {\n  /* Pull out the header and footer */\n  .masthead {\n    position: fixed;\n    top: 0;\n  }\n  /* Start the vertical centering */\n  .site-wrapper-inner {\n    vertical-align: middle;\n  }\n\n}"},qSPs:function(n,t){n.exports='\x3c!-- <div class="site-wrapper"> --\x3e\n  \x3c!-- <nav class="navbar navbar-black">\n    <div class="container-fluid">\n      <div class="navbar-header">\n        <a class="navbar-brand" href="#">Trivial Coding Game</a>\n      </div>\n      <ul *ngIf="!session.getUser()" class="nav navbar-nav navbar-right">\n        <button type="button" class="btn btn-link btn-lg glyphicon glyphicon-user" data-toggle="modal" data-target="#myModal1">SignUp</button>\n        <button type="button" class="btn btn-link btn-lg glyphicon glyphicon-log-in" data-toggle="modal" data-target="#myModal2">LogIn</button>\n      </ul>\n      <ul *ngIf="session.getUser()" class="nav navbar-nav navbar-right">\n        <button type="button" (click)="logout()" class="btn btn-link btn-lg glyphicon glyphicon-log-out">LogOut</button>\n      </ul>\n    </div>\n  </nav>\n\n  <div class="container-form">    \n\n      <div class="modal fade" id="myModal1" role="dialog">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">&times;</button>\n              <h4 class="modal-title">SignUp Form</h4>\n            </div>\n            <div class="modal-body">\n                <div class="input-group">\n                <span class="input-group-addon">\n                    <i class="glyphicon glyphicon-user"></i>\n                  </span>\n                <input id="username1" type="text" class="form-control" [(ngModel)]="username" name="username" placeholder="Username">\n                </div>\n                <div class="input-group">\n                <span class="input-group-addon">\n                    <i class="glyphicon glyphicon-lock"></i>\n                  </span>\n                <input id="password1" type="password" class="form-control" [(ngModel)]="password" name="password" placeholder="Password">\n              </div>\n            </div>\n            <div>\n                <p *ngIf="error" class="error"> {{ error }} </p>\n            </div>\n            <div class="modal-footer">\n              <button type="button" class="btn btn-default" (click)="signup()" data-dismiss="modal">SignUp</button>\n            </div>\n          </div>          \n        </div>\n      </div>      \n    </div>\n\n    <div class="container-form">    \n\n        <div class="modal fade" id="myModal2" role="dialog">\n          <div class="modal-dialog">\n            <div class="modal-content">\n              <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                <h4 class="modal-title">Login Form</h4>\n              </div>\n              <div class="modal-body">\n                  <div class="input-group">\n                  <span class="input-group-addon">\n                      <i class="glyphicon glyphicon-user"></i>\n                    </span>\n                  <input id="username" type="text" class="form-control" [(ngModel)]="username" name="username" placeholder="Username">\n                  </div>\n                  <div class="input-group">\n                  <span class="input-group-addon">\n                      <i class="glyphicon glyphicon-lock"></i>\n                    </span>\n                  <input id="password" type="password" class="form-control" [(ngModel)]="password" name="password" placeholder="Password">\n                </div>\n              </div>\n              <div>\n                  <p *ngIf="error" class="error"> {{ error }} </p>\n              </div>\n              <div class="modal-footer">\n                <button type="button" class="btn btn-default" (click)="login()" data-dismiss="modal">Login</button>\n              </div>\n            </div>          \n          </div>\n        </div>      \n      </div> --\x3e\n\n\n\n  <div class="site-wrapper-inner">\n      <div class="masthead clearfix">\n        <div class="inner">\n          <div *ngIf="!session.getUser()">\n            <div class="cover-container center">\n    \n              <h3>Log with Facebook</h3>\n              <img class="facebook" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/F_icon.svg/50px-F_icon.svg.png" alt="">\n    \n              <button (click)="loginFb()" class="btn btn-lg btn-success btn-lng">\n                Login\n              </button>\n    \n              \x3c!-- <button (click)="getFbProfile()" class="btn btn-lg btn-primary btn-block">\n                Get profile\n              </button> --\x3e\n            </div>\n          </div>\n      </div>\n\n    </div>\n  </div>\n\x3c!-- </div> --\x3e'},tsPk:function(n,t){n.exports="html,\nbody {\n  height: 100vh;\n  background-color: #fff;\n}\nbody {\n  color: #fff;\n  text-align: center;\n  text-shadow: 0 1px 3px rgba(0,0,0,.5);\n}\n.site-wrapper {\n  background-image: url('trivial-world.abae401dab04b90385bb.jpg');\n  background-size: cover;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  min-height: 100vh;\n  background-color: #333;\n  overflow: hidden;\n}\n.site-wrapper-inner {\n  display: table-cell;\n  vertical-align: top;\n}\n.inner {\n  padding: 30px;\n}\n.cover {\n  padding: 0 20px;\n}\n.cover .btn-lg {\n  padding: 10px 20px;\n  font-weight: bold;\n}\n.center {\n  text-align: center;\n}\n.games-board {\n  width: 80%;\n  margin: 0 auto;  \n  padding: 50px;\n}\n.games-board h2 {\n  text-transform: uppercase;\n  font-size: 40px;\n  color: white;\n}\n.cover-img {\n  opacity: 1;\n  background-image: url('board-game.e5afa7865c6119f21796.png');\n  background-size: cover;  \n  padding: 50px;\n  width: 434px;\n  height: 292px;\n}\n.game-item {\n  background-color: white;\n  padding: 30px;\n  border: black 2px;\n  width: 486px;\n  height: 352px;\n}\nh3.item-game {\n  font-size: 30px;\n  font-weight: bold;\n  color: red;\n}\n.game-form {\n  padding-top: 50px;\n  color: white;\n}\n.game-form .form-control {\n  width: 50%;\n  margin: 0 auto;\n}\n@media (min-width: 768px) {\n  /* Pull out the header and footer */\n  .masthead {\n    position: fixed;\n    top: 0;\n  }\n  /* Start the vertical centering */\n  .site-wrapper-inner {\n    vertical-align: middle;\n  }\n\n}"},x35b:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("WT6e"),i=e("4PVY"),a=e("OE0E"),s=e("7DMc"),r=e("NOoU"),c=(e("owTz"),e("xgm2"),e("XZJt")),l={production:!0,BASE_URL:""},d=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},p=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},g=function(){function n(n){this.http=n,this.BASEURL=l.BASE_URL,this.options={withCredentials:!0},this.userEvent=new o.v,this.isLoggedIn().subscribe()}return n.prototype.getUser=function(){return this.user},n.prototype.getUserEvent=function(){return this.userEvent},n.prototype.configureUser=function(n){var t=this;return void 0===n&&(n=!1),function(e){return n?(t.user=e,t.userEvent.emit(e),console.log("Setting user, welcome "+t.user.username)):(console.log("bye bye "+t.user.username),t.user=null,t.userEvent.emit(null)),e}},n.prototype.handleError=function(n){return console.log(n),c.a.throw(n.json().message)},n.prototype.loginFb=function(n,t,e){return this.http.post(this.BASEURL+"/api/auth/loginFb",{username:n,imgUrl:t,userFbId:e},this.options).map(function(n){return n.json()}).map(this.configureUser(!0)).catch(this.handleError)},n.prototype.signup=function(n,t){return this.http.post(this.BASEURL+"/api/auth/signup",{username:n,password:t},this.options).map(function(n){return n.json()}).map(this.configureUser(!0)).catch(this.handleError)},n.prototype.login=function(n,t){return this.http.post(this.BASEURL+"/api/auth/login",{username:n,password:t},this.options).map(function(n){return n.json()}).map(this.configureUser(!0)).catch(this.handleError)},n.prototype.logout=function(){return this.http.get(this.BASEURL+"/api/auth/logout",this.options).map(function(n){return n.json()}).map(this.configureUser(!1)).catch(this.handleError)},n.prototype.isLoggedIn=function(){return this.http.get(this.BASEURL+"/api/auth/loggedin",this.options).map(function(n){return n.json()}).map(this.configureUser(!0)).catch(this.handleError)},n=d([Object(o.A)(),p("design:paramtypes",[r.a])],n)}(),u=e("bfOx"),h=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},m=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},f=function(){function n(n,t){this.session=n,this.router=t}return n.prototype.ngOnInit=function(){},n.prototype.login=function(){var n=this;this.session.login(this.username,this.password).catch(function(t){return n.error=t}).subscribe(function(t){n.router.navigate(["/gameshome"])})},n.prototype.signup=function(){var n=this;this.session.signup(this.username,this.password).catch(function(t){return n.error=t}).subscribe(function(t){n.router.navigate(["/gameshome"])})},n.prototype.logout=function(){var n=this;this.session.logout().catch(function(t){return n.error=t}).subscribe(function(){return n.router.navigate(["/"])})},n=h([Object(o.n)({selector:"app-root",template:e("5xMp"),styles:[e("okgc")]}),m("design:paramtypes",[g,u.b])],n)}(),b=e("Gu4w"),v=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},y=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},x=function(){function n(n,t,e){this.session=n,this.router=t,this.fb=e,console.log("Initializing Facebook"),e.init({appId:"538391203211368",version:"v2.12"})}return n.prototype.ngOnInit=function(){},n.prototype.loginFb=function(){this.fb.login().then(function(n){console.log("Logged in",n)}).catch(function(n){return console.error(n)})},n.prototype.getFbProfile=function(){var n=this;this.fb.api("/me").then(function(t){n.username=t.name,n.imgUrl="https://graph.facebook.com/"+t.id+"/picture",n.saveUserFb(t.name,n.imgUrl,t.id),console.log("Got the users profile",t);var e='<img src="https://graph.facebook.com/'+t.id+'/picture">';console.log(e),console.log(n.imgUrl)}).catch(function(n){return console.error(n)})},n.prototype.saveUserFb=function(n,t,e){var o=this;this.session.loginFb(n,t,e).catch(function(n){return o.error=n}).subscribe(function(n){o.router.navigate(["/gameshome"]),console.log("Welcome "+n.username),console.log("saveUserFb en componente"),console.log(n)})},n=v([Object(o.n)({selector:"app-login-form",template:e("qSPs"),styles:[e("E20h")]}),y("design:paramtypes",[g,u.b,b.b])],n)}(),k=e("DmT9"),w=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},R=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},S=function(){function n(n,t,e){var o=this;this.http=n,this.session=t,this.router=e,this.BASE_URL=l.BASE_URL,this.options={withCredentials:!0},this.messages=[],this.notifications=[],this.statusOption="unselected",this.userAnswers=[],this.creator=!1,this.gameStarted=!1,this.user=this.session.getUser(),this.session.getUserEvent().subscribe(function(n){return o.user=n}),this.gameFinished=!1,this.socket=k(""+this.BASE_URL),this.socket.on("connect",function(){return console.log("Connected to WS")}),this.socket.on("chat",function(n){o.messages.push({message:n.message,type:"other"})}),this.socket.on("sending-game",function(n){o.gameSocket=n,console.log("this.gameSocket recibido del back en chat.service:"),console.log(o.gameSocket)}),this.socket.on("resend-question",function(n){o.gameStarted=!0,o.gameSocket.status=n.status,console.log(o.gameSocket.status),o.userRecord=0,o.getQuestions()}),this.socket.on("ranking-game",function(n){o.gameSocket=n.gameData,o.drawRanking(n.gameData),o.note=n.status,o.currentQuestion="",o.gameFinished=!0}),this.socket.on("info-all-games",function(n){o.allGames=n.allGames})}return n.prototype.getQuestions=function(){var n=this;this.currentQuestion=this.gameSocket.questions[0];var t=1,e=setInterval(function(){n.gameSocket.questions[t]?(setTimeout(function(){n.userAnswers.length<t&&n.userAnswers.push("x"),n.currentQuestion=n.gameSocket.questions[t],n.statusOption="unselected",n.classCorrect="no-correct-answer",t++},750),n.showCorrect()):(clearInterval(e),n.getRankingGame())},7500)},n.prototype.showCorrect=function(){this.classCorrect="correct-answer",this.statusOption="selected"},n.prototype.sendMessage=function(n){this.socket.emit("chat-ready",{status:"Mensaje recibido",message:n}),this.messages.push({message:n,type:"me"})},n.prototype.getGame=function(n){this.socket.emit("get-game",{status:"Game sent",gameId:n})},n.prototype.joinGame=function(n,t){var e=this;this.updateGame(n,0,t._id).subscribe(function(t){e.gameSocket=t,e.socket.emit("get-game",{status:"Game sent",gameId:n}),e.router.navigate(["/chat"]),console.log(e.gameSocket)})},n.prototype.sendQuestion=function(n){var t=this;this.updateGame(this.gameSocket._id,n,0).subscribe(function(n){t.gameSocket=n}),this.socket.emit("send-question",{status:n})},n.prototype.getNewGame=function(n,t,e){return this.http.post(this.BASE_URL+"/api/game/newGame",{name:n,userId:t,numQ:e},this.options).map(function(n){return n.json()})},n.prototype.getRankingGame=function(){var n=this,t=this.session.getUser().username;this.updateFinishedGame(this.gameSocket._id,t,this.userRecord).subscribe(function(t){n.socket.emit("end-game",{status:"Game finished",gameData:t})})},n.prototype.updateGame=function(n,t,e){return this.http.put(this.BASE_URL+"/api/game/"+n,{gameStatus:t,player:e},this.options).map(function(n){return n.json()})},n.prototype.updateFinishedGame=function(n,t,e){return this.http.post(this.BASE_URL+"/api/game/"+n,{user:t,userScore:e},this.options).map(function(n){return n.json()})},n.prototype.drawRanking=function(n){this.gameRanking=n.ranking,this.gameRanking.sort(function(n,t){return n.score<=t.score?1:t.score<n.score?-1:0})},n.prototype.getAllGames=function(){var n=this;this.getGames().subscribe(function(t){n.allGames=t,console.log(n.allGames),n.socket.emit("request-all-games",{status:"New Game Created",allGames:t})})},n.prototype.getGames=function(){return this.http.get(this.BASE_URL+"/api/game",this.options).map(function(n){return n.json()})},n=w([Object(o.A)(),R("design:paramtypes",[r.a,g,u.b])],n)}(),j=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},G=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},O=function(){function n(n,t,e){var o=this;this.chat=n,this.session=t,this.router=e,this.creator=!1,this.user=this.session.getUser(),this.session.getUserEvent().subscribe(function(n){return o.user=n})}return n.prototype.ngOnInit=function(){},n.prototype.sendMessage=function(){console.log("Enviando mensaje: "+this.msgToSend),this.chat.sendMessage(this.msgToSend),this.msgToSend=""},n.prototype.recordAnswer=function(n,t){"unselected"===this.chat.statusOption&&(this.chat.userAnswers.push(n),n===t&&this.chat.userRecord++),document.getElementById("option"+n).setAttribute("style","background-color: plum"),this.chat.statusOption="selected",console.log("i: "+n+" / correct: "+t),console.log("userAnswers:"),console.log(this.chat.userAnswers),console.log("userRecord:"),console.log(this.chat.userRecord)},n.prototype.goHome=function(){this.router.navigate(["/gameshome"])},n=j([Object(o.n)({selector:"app-chat",template:e("y5EM"),styles:[e("9rA2")]}),G("design:paramtypes",[S,g,u.b])],n)}(),U=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},_=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},E=function(){function n(n,t,e,o){var i=this;this.chat=n,this.session=t,this.router=e,this.route=o,this.route.params.subscribe(function(n){return i.getGameData(n.id)}),this.user=this.session.getUser(),this.session.getUserEvent().subscribe(function(n){return i.user=n})}return n.prototype.ngOnInit=function(){},n.prototype.getGameData=function(n){this.chat.getGame(n),this.gameSocket=this.chat.gameSocket},n.prototype.startGame=function(){console.log(this.gameSocket)},n=U([Object(o.n)({selector:"app-game",template:e("8q1w"),styles:[e("JS6j")]}),_("design:paramtypes",[S,g,u.b,u.a])],n)}(),I=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},A=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},P=function(){function n(n,t,e){var o=this;this.chat=n,this.session=t,this.router=e,this.admin="goiko",this.user=this.session.getUser(),this.session.getUserEvent().subscribe(function(n){o.user=n})}return n.prototype.ngOnInit=function(){this.getGames()},n.prototype.getGames=function(){var n=this;this.chat.getGames().subscribe(function(t){n.chat.allGames=t,console.log(n.games)})},n.prototype.joinGame=function(n){this.user=this.session.getUser(),this.chat.joinGame(n,this.user),console.log("this.user en games-home.component:"),console.log(this.user)},n.prototype.getNewGame=function(n,t){var e=this,o="",i=0;o=n||"Trivial-Coding-Game",i=t||3,this.chat.getNewGame(o,this.user._id,i).subscribe(function(n){e.chat.getGame(n._id),setTimeout(function(){e.chat.gameSocket.creator._id===e.user._id&&(e.chat.creator=!0),e.chat.getAllGames()},500),e.getGames(),e.router.navigate(["/chat"])})},n=I([Object(o.n)({selector:"app-games-home",template:e("4UQF"),styles:[e("tsPk")]}),A("design:paramtypes",[S,g,u.b])],n)}(),M=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"",component:x},{path:"chat",component:O},{path:"game/:id",component:E},{path:"gameshome",component:P},{path:"**",redirectTo:""}],F=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,o);else for(var r=n.length-1;r>=0;r--)(i=n[r])&&(s=(a<3?i(s):a>3?i(t,e,s):i(t,e))||s);return a>3&&s&&Object.defineProperty(t,e,s),s},L=function(){function n(){}return n=F([Object(o.I)({declarations:[f,x,O,E,P],imports:[a.a,r.b,s.a,u.c.forRoot(M),b.a.forRoot()],providers:[g,S],bootstrap:[f]})],n)}();l.production&&Object(o._13)(),Object(i.a)().bootstrapModule(L).catch(function(n){return console.log(n)})},y5EM:function(n,t){n.exports='<div class="row">\n  <div class="col-md-6 center left-game">\n    <div class="col-md-2"></div>\n    <div class="col-md-10 center">\n      <div *ngIf="this.chat.gameSocket">\n        <div class="game-board">\n          <h3>{{ this.chat.gameSocket.name }} - Created by {{ this.chat.gameSocket.creator.username }}</h3>\n          <div *ngIf=\'this.chat.gameFinished\'>\n            <h2>Game Over</h2>\n            <button class="btn btn-success btn-lg go-home" (click)=\'goHome()\'>Back to Games Board</button>\n          </div>\n          <div *ngIf=\'!this.chat.gameFinished\'>\n            <div *ngIf="!this.chat.gameStarted">\n              <div *ngIf="this.chat.creator">\n                <p>Soy el creador del juego</p>\n                <button (click)=\'this.chat.sendQuestion("started")\' class="btn btn-lg btn-success start-game">Start Game</button>\n              </div>\n              <div *ngIf="!this.chat.creator">\n                <h4>Game will start soon...</h4>\n              </div>\n              <br>\n              <div class="game-card">\n                <div class="game-over">\n                  <div class="game-players">\n                    <div class="players">\n                      <h4>PLAYERS JOINING THIS GAME:</h4>\n                      <ul *ngFor="let item of this.chat.gameSocket.players">\n                        <li>\n                          <h5>{{ item.username }}</h5>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <br>\n        </div>\n      </div>\n\n      <div *ngIf=this.chat.currentQuestion>\n        <div class="game-card">\n          <div class="game-started">\n            <div class="col-md-4 center category">\n              <h3>CATEGORY:</h3>\n              <h3>\n                <span>{{ this.chat.currentQuestion.category }}</span>\n              </h3>\n              <img class="img-category" src="{{ this.chat.currentQuestion.imgUrl }}" alt="">\n            </div>\n            <div class="col-md-8 center">\n              <div class="question">\n                <h2>{{ this.chat.currentQuestion.question }}</h2>\n                <div class="answers">\n                  <div *ngFor="let item of this.chat.currentQuestion.options; let i = index">\n                  <button [ngClass]="this.chat.statusOption"(click)="recordAnswer(i, this.chat.currentQuestion.correctOption)"\n                    class="btn-lng" id="option{{i}}">{{ item }}</button>\n                    <div *ngIf="(i===this.chat.currentQuestion.correctOption)" class="{{this.chat.classCorrect}}"></div>\n                    <div *ngIf="!(i===this.chat.currentQuestion.correctOption)" class="no-correct-answer"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div *ngIf=\'this.chat.gameFinished\'>\n        <div class="game-card">\n          <div class="game-over">\n            <div class="game-ranking">\n              <h3>RANKING</h3>\n              <table class="ranking-item">\n                <tr>\n                  <th>POSITION</th>\n                  <th>USER</th>\n                  <th>SCORE</th>\n                </tr>\n                <tr *ngFor="let item of this.chat.gameRanking; let i = index">\n                  <td>\n                    <span>{{i + 1}}</span>\n                  </td>\n                  <td>{{ item.user }}</td>\n                  <td>{{ item.score }} correct answers</td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-md-6 center">\n    <h4 class="chat">Chat with your opponents!</h4>\n    <div class="chat">\n      <div class="conversations">\n        <div class="mensaje" *ngFor="let m of chat.messages">\n          <div [ngClass]="m.type">\n            <div class="text">{{m.message}}</div>\n          </div>\n        </div>\n      </div>\n      <div class="sender">\n        <input type="text" [(ngModel)]="msgToSend" />\n        <button (click)="sendMessage()" class="btn-warning">Enviar</button>\n      </div>\n    </div>\n  </div>\n</div>'}},[0]);